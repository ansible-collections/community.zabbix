---
- block:
  - include_tasks: zabbix_item_setup.yml

  - include_tasks: zabbix_item_tests.yml

  - include_tasks: zabbix_item_doc.yml

  always:
    - name: "Cleanup item if test failed"
      community.zabbix.zabbix_item:
        item_name: ExampleItem
        host_name: ExampleHostForItem
        state: absent
      ignore_errors: true
    - name: "Cleanup host if test failed"
      community.zabbix.zabbix_host:
        host_name: ExampleHostForItem
        state: absent
      ignore_errors: true

