---
# These two tests are close to documentation example

- name: Create a new item or rewrite an existing item's info
  community.zabbix.zabbix_item:
    host_name: ExampleHostForItem
    item_name: ExampleItem
    key: ExampleItem
    description: My ExampleItem Description
    type: zabbix_internal
    value_type: text
    status: enabled
    state: present
    tags:
      - tag: ExampleItemTag
        value: ExampleTagValue
      - tag: ExampleItemTag2
        value: ExampleTagValue
  register: zabbix_item_1

- name: Update an existing item's check type
  community.zabbix.zabbix_item:
    host_name: ExampleHostForItem
    item_name: ExampleItem
    type: simple_check
  register: zabbix_item_2

- name: expect both to succeed
  ansible.builtin.assert:
    that:
      - "zabbix_item_1 is changed"
      - "zabbix_item_2 is changed"
